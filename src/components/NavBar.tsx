'use client';

import Link from 'next/link';
import { usePathname } from 'next/navigation';

const tabs = [
  { href: '/', label: 'Today', icon: CalendarIcon },
  { href: '/session', label: 'Sessions', icon: HistoryIcon },
  { href: '/progress', label: 'Progress', icon: ChartIcon },
  { href: '/profile', label: 'Gym', icon: UserIcon },
];

export function NavBar() {
  const pathname = usePathname();

  const isActive = (href: string) =>
    href === '/' ? pathname === '/' : pathname.startsWith(href);

  return (
    <nav className="fixed bottom-0 left-0 right-0 z-50 bg-white/90 backdrop-blur">
      <div className="mx-auto max-w-xl px-6 pb-[calc(env(safe-area-inset-bottom)+12px)] pt-3">
        <div className="grid grid-cols-5 items-center">
          <div className="flex justify-center">
            <IconTab {...tabs[0]} active={isActive(tabs[0].href)} />
          </div>

          <div className="flex justify-center">
            <IconTab {...tabs[1]} active={isActive(tabs[1].href)} />
          </div>

          <div className="flex justify-center">
            <Link href="/" aria-label="Claimb Home">
              <LogoMark className="h-10 w-auto" />
            </Link>
          </div>

          <div className="flex justify-center">
            <IconTab {...tabs[2]} active={isActive(tabs[2].href)} />
          </div>

          <div className="flex justify-center">
            <IconTab {...tabs[3]} active={isActive(tabs[3].href)} />
          </div>
        </div>
      </div>
    </nav>
  );
}

function IconTab({
  href,
  label,
  icon: Icon,
  active,
}: {
  href: string;
  label: string;
  icon: React.ComponentType<{ className?: string }>;
  active: boolean;
}) {
  return (
    <Link
      href={href}
      aria-label={label}
      className={[
        'inline-flex h-10 w-10 items-center justify-center rounded-full ui-transition',
        active ? 'opacity-100' : 'opacity-30 hover:opacity-80',
      ].join(' ')}
    >
      <Icon className="h-7 w-7 text-black" />
    </Link>
  );
}


/** --- SVG ICONS (simple, clean, matches screenshot vibe) --- */

function CalendarIcon({ className }: { className?: string }) {
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9 16.5C8.3 16.5 7.70833 16.2583 7.225 15.775C6.74167 15.2917 6.5 14.7 6.5 14C6.5 13.3 6.74167 12.7083 7.225 12.225C7.70833 11.7417 8.3 11.5 9 11.5C9.7 11.5 10.2917 11.7417 10.775 12.225C11.2583 12.7083 11.5 13.3 11.5 14C11.5 14.7 11.2583 15.2917 10.775 15.775C10.2917 16.2583 9.7 16.5 9 16.5ZM5 22C4.45 22 3.97917 21.8042 3.5875 21.4125C3.19583 21.0208 3 20.55 3 20V6C3 5.45 3.19583 4.97917 3.5875 4.5875C3.97917 4.19583 4.45 4 5 4H6V2H8V4H16V2H18V4H19C19.55 4 20.0208 4.19583 20.4125 4.5875C20.8042 4.97917 21 5.45 21 6V20C21 20.55 20.8042 21.0208 20.4125 21.4125C20.0208 21.8042 19.55 22 19 22H5ZM5 20H19V10H5V20ZM5 8H19V6H5V8Z" fill="black"/>
</svg>
  );
}

function HistoryIcon({ className }: { className?: string }) {
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 21C9.7 21 7.69583 20.2375 5.9875 18.7125C4.27917 17.1875 3.3 15.2833 3.05 13H5.1C5.33333 14.7333 6.10417 16.1667 7.4125 17.3C8.72083 18.4333 10.25 19 12 19C13.95 19 15.6042 18.3208 16.9625 16.9625C18.3208 15.6042 19 13.95 19 12C19 10.05 18.3208 8.39583 16.9625 7.0375C15.6042 5.67917 13.95 5 12 5C10.85 5 9.775 5.26667 8.775 5.8C7.775 6.33333 6.93333 7.06667 6.25 8H9V10H3V4H5V6.35C5.85 5.28333 6.8875 4.45833 8.1125 3.875C9.3375 3.29167 10.6333 3 12 3C13.25 3 14.4208 3.2375 15.5125 3.7125C16.6042 4.1875 17.5542 4.82917 18.3625 5.6375C19.1708 6.44583 19.8125 7.39583 20.2875 8.4875C20.7625 9.57917 21 10.75 21 12C21 13.25 20.7625 14.4208 20.2875 15.5125C19.8125 16.6042 19.1708 17.5542 18.3625 18.3625C17.5542 19.1708 16.6042 19.8125 15.5125 20.2875C14.4208 20.7625 13.25 21 12 21ZM14.8 16.2L11 12.4V7H13V11.6L16.2 14.8L14.8 16.2Z" fill="black"/>
</svg>

  );
}

function ChartIcon({ className }: { className?: string }) {
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M4 19H8V11H4V19ZM10 19H14V5H10V19ZM16 19H20V13H16V19ZM2 21V9H8V3H16V11H22V21H2Z" fill="black"/>
</svg>
  );
}

function UserIcon({ className }: { className?: string }) {
  return (
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M12 12C10.9 12 9.95833 11.6083 9.175 10.825C8.39167 10.0417 8 9.1 8 8C8 6.9 8.39167 5.95833 9.175 5.175C9.95833 4.39167 10.9 4 12 4C13.1 4 14.0417 4.39167 14.825 5.175C15.6083 5.95833 16 6.9 16 8C16 9.1 15.6083 10.0417 14.825 10.825C14.0417 11.6083 13.1 12 12 12ZM4 20V17.2C4 16.6333 4.14583 16.1125 4.4375 15.6375C4.72917 15.1625 5.11667 14.8 5.6 14.55C6.63333 14.0333 7.68333 13.6458 8.75 13.3875C9.81667 13.1292 10.9 13 12 13C13.1 13 14.1833 13.1292 15.25 13.3875C16.3167 13.6458 17.3667 14.0333 18.4 14.55C18.8833 14.8 19.2708 15.1625 19.5625 15.6375C19.8542 16.1125 20 16.6333 20 17.2V20H4ZM6 18H18V17.2C18 17.0167 17.9542 16.85 17.8625 16.7C17.7708 16.55 17.65 16.4333 17.5 16.35C16.6 15.9 15.6917 15.5625 14.775 15.3375C13.8583 15.1125 12.9333 15 12 15C11.0667 15 10.1417 15.1125 9.225 15.3375C8.30833 15.5625 7.4 15.9 6.5 16.35C6.35 16.4333 6.22917 16.55 6.1375 16.7C6.04583 16.85 6 17.0167 6 17.2V18ZM12 10C12.55 10 13.0208 9.80417 13.4125 9.4125C13.8042 9.02083 14 8.55 14 8C14 7.45 13.8042 6.97917 13.4125 6.5875C13.0208 6.19583 12.55 6 12 6C11.45 6 10.9792 6.19583 10.5875 6.5875C10.1958 6.97917 10 7.45 10 8C10 8.55 10.1958 9.02083 10.5875 9.4125C10.9792 9.80417 11.45 10 12 10Z" fill="black"/>
</svg>
  );
}

/** Center logo mark (replace path with your own SVG if you have it) */
function LogoMark({ className }: { className?: string }) {
  return (
<svg width="66" height="28" viewBox="0 0 66 28" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0.714695 13.1356C0.613385 12.3105 0.954977 11.4931 1.61329 10.9855L6.84607 6.95046C7.18017 6.69284 7.57739 6.52978 7.99613 6.47836L8.03655 6.4734L8.57023 10.8198L9.90442 21.686L10.4381 26.0324L10.3977 26.0374C9.97893 26.0888 9.55406 26.0267 9.16757 25.8575L3.11405 23.2083C2.35249 22.875 1.82331 22.1646 1.722 21.3394L0.714695 13.1356Z" fill="black"/>
<rect width="43.2353" height="20" transform="translate(8.01953 6.32764) rotate(-7)" fill="black"/>
<path d="M14.7805 19.2848C13.949 19.3869 13.2007 19.3162 12.5358 19.0726C11.8709 18.8289 11.326 18.4273 10.901 17.8677C10.4828 17.2996 10.2203 16.5806 10.1135 15.7109C10.0086 14.8565 10.0865 14.1035 10.3472 13.452C10.6156 12.7995 11.0315 12.2761 11.5948 11.8816C12.1572 11.4796 12.8237 11.2313 13.5942 11.1366C14.2961 11.0505 14.9023 11.0999 15.4129 11.2851C15.9235 11.4702 16.3309 11.7609 16.6351 12.1572C16.9394 12.5535 17.1295 13.0296 17.2055 13.5856L16.8278 13.632C16.7522 13.3315 16.6051 13.0476 16.3864 12.7802C16.1668 12.5051 15.8736 12.2933 15.5069 12.1447C15.1401 11.9961 14.6898 11.9546 14.1557 12.0202C13.6064 12.0877 13.1408 12.2687 12.7588 12.5634C12.3768 12.8582 12.0995 13.2484 11.9268 13.7343C11.7532 14.2125 11.7044 14.7606 11.7802 15.3785C11.8571 16.0041 12.0413 16.5274 12.3331 16.9485C12.6325 17.3686 13.007 17.675 13.4566 17.8676C13.9137 18.0593 14.4132 18.1219 14.9548 18.0553C15.4736 17.9916 15.8977 17.8505 16.2271 17.632C16.5555 17.4058 16.7964 17.1284 16.9496 16.7998C17.1029 16.4712 17.1761 16.1215 17.1693 15.7506L18.1305 15.6326C18.1779 16.2076 18.0942 16.7561 17.8796 17.2781C17.6639 17.7924 17.3035 18.2316 16.7984 18.5956C16.2924 18.952 15.6197 19.1818 14.7805 19.2848ZM17.2055 13.5856L16.7552 12.851L16.5233 10.9629L17.4617 10.8476L17.7891 13.514L17.2055 13.5856ZM19.0269 18.5776L18.9314 17.7994L19.8469 17.687L19.0263 11.004L18.1909 11.1066L18.0968 10.3399L20.4312 10.0532L21.346 17.5029L22.1699 17.4018L22.2654 18.1799L19.0269 18.5776ZM23.6714 14.0579C23.4349 14.0869 23.2133 14.0483 23.0067 13.942C22.8 13.8357 22.6794 13.6415 22.6447 13.3592C22.6082 13.0616 22.6998 12.7987 22.9196 12.5704C23.1461 12.3335 23.4554 12.1406 23.8475 11.9918C24.2387 11.8354 24.6556 11.73 25.0981 11.6756C25.8381 11.5848 26.4247 11.6638 26.858 11.9126C27.2988 12.1605 27.552 12.5824 27.6174 13.1784L26.186 13.1567C26.1513 12.8744 26.0221 12.6734 25.7983 12.5538C25.5745 12.4341 25.2681 12.3982 24.879 12.446C24.6349 12.4759 24.406 12.535 24.1922 12.6232C23.9775 12.7038 23.8052 12.814 23.6752 12.9539C23.5453 13.0937 23.482 13.2719 23.4853 13.4883L23.411 12.7888C23.6876 12.7704 23.9125 12.8047 24.0858 12.8918C24.2582 12.9713 24.3532 13.1146 24.3709 13.3215C24.3876 13.5208 24.3343 13.6861 24.2111 13.8174C24.0954 13.9477 23.9155 14.0279 23.6714 14.0579ZM28.5818 17.5322C28.0325 17.5996 27.5989 17.5057 27.281 17.2505C26.9622 16.9876 26.7696 16.5853 26.7031 16.0437L26.6665 15.7461L26.5063 15.7658L26.3166 14.2209L26.248 14.2294L26.2478 13.6602L26.186 13.1567L27.6174 13.1784L27.9673 16.0278C27.9888 16.2033 28.0529 16.3464 28.1594 16.4573C28.265 16.5605 28.4055 16.6013 28.581 16.5797C28.7641 16.5573 28.8906 16.4836 28.9604 16.3589C29.037 16.2256 29.0645 16.0712 29.043 15.8957L28.8392 14.2364L29.8005 14.1184L29.9902 15.6633C30.0539 16.1821 29.9667 16.6071 29.7285 16.9383C29.4981 17.2686 29.1158 17.4666 28.5818 17.5322ZM24.7697 17.9886C24.1823 18.0607 23.6843 17.9786 23.2758 17.7422C22.8673 17.5059 22.6327 17.1397 22.5718 16.6438C22.5277 16.2853 22.568 15.9822 22.6925 15.7346C22.8236 15.4784 23.0181 15.2648 23.2759 15.0938C23.5327 14.9151 23.8357 14.7656 24.1849 14.6453L25.1753 14.2914C25.3909 14.2184 25.5818 14.133 25.7479 14.0352C25.9131 13.9298 26.0334 13.8066 26.1091 13.6656C26.1847 13.5247 26.2103 13.355 26.186 13.1567L26.351 14.2167L26.3166 14.2209C26.2667 14.3819 26.1673 14.5181 26.0183 14.6293C25.8693 14.7405 25.6765 14.8416 25.4399 14.9326L25.0506 15.0733C24.8521 15.1597 24.6737 15.2513 24.5152 15.3482C24.3558 15.4374 24.2335 15.5454 24.1484 15.672C24.0709 15.7977 24.0443 15.9597 24.0687 16.158C24.1015 16.4251 24.2221 16.6193 24.4306 16.7409C24.6382 16.8548 24.9022 16.892 25.2226 16.8527C25.4668 16.8227 25.6857 16.7455 25.8795 16.621C26.08 16.488 26.2306 16.2953 26.3313 16.0428C26.4395 15.7895 26.4698 15.4683 26.422 15.0792L26.7796 15.0585C26.8583 15.6994 26.8147 16.2274 26.6489 16.6427C26.4906 17.0571 26.243 17.374 25.906 17.5935C25.5757 17.8045 25.1969 17.9361 24.7697 17.9886ZM30.3944 17.1818L30.2989 16.4037L31.2487 16.287L30.7091 11.8927L29.8509 11.9981L29.7553 11.22L32.1012 10.9319L32.7363 16.1044L33.5717 16.0018L33.6672 16.78L30.3944 17.1818ZM31.2072 10.368C30.925 10.4026 30.6829 10.3549 30.4811 10.2248C30.286 10.0861 30.172 9.8833 30.1392 9.61628C30.1055 9.34164 30.167 9.11726 30.3237 8.94313C30.4881 8.76807 30.7114 8.66321 30.9937 8.62855C31.2836 8.59296 31.5256 8.64068 31.7198 8.77171C31.914 8.90275 32.028 9.10559 32.0617 9.38023C32.0945 9.64725 32.033 9.87163 31.8772 10.0534C31.7205 10.2275 31.4971 10.3324 31.2072 10.368ZM34.0268 16.7358L33.9313 15.9577L34.8811 15.841L34.3415 11.4467L33.4833 11.5521L33.3891 10.7854L35.5519 10.5198L35.7978 12.5225L35.9781 12.4771L36.3701 15.6698L37.0224 15.5897L37.1166 16.3564L34.0268 16.7358ZM37.8604 16.2651L37.7648 15.4869L38.4171 15.4069L38.0153 12.134C37.974 11.7984 37.8602 11.5645 37.6736 11.4326C37.4946 11.2996 37.264 11.2505 36.9818 11.2852C36.7834 11.3095 36.6021 11.3783 36.4379 11.4914C36.2804 11.5959 36.1604 11.7539 36.0779 11.9653C35.9955 12.1768 35.9744 12.4466 36.0147 12.7746L35.7071 12.824C35.6443 12.3129 35.6601 11.8734 35.7543 11.5056C35.8485 11.1378 36.0294 10.8446 36.2968 10.6259C36.5709 10.3986 36.9444 10.2559 37.4174 10.1979C37.9591 10.1314 38.4203 10.2296 38.8011 10.4926C39.1819 10.7556 39.4144 11.2304 39.4987 11.917L39.9048 15.2242L40.5685 15.1427L40.664 15.9209L37.8604 16.2651ZM41.4079 15.8295L41.3123 15.0514L41.9646 14.9713L41.5627 11.6985C41.5215 11.3628 41.4076 11.129 41.2211 10.997C41.0345 10.865 40.8001 10.8164 40.5178 10.851C40.3194 10.8754 40.1381 10.9441 39.9739 11.0572C39.8173 11.1693 39.6978 11.3311 39.6154 11.5426C39.532 11.7465 39.5104 12.0124 39.5507 12.3404L39.3118 12.3814C39.249 11.8703 39.2609 11.4313 39.3475 11.0644C39.4418 10.6966 39.6226 10.4034 39.89 10.1847C40.1565 9.95835 40.5262 9.81615 40.9992 9.75807C41.5256 9.69344 41.9754 9.79309 42.3486 10.057C42.7293 10.32 42.9619 10.7949 43.0462 11.4815L43.4537 14.8001L44.1746 14.7115L44.2687 15.4783L41.4079 15.8295ZM48.8486 15.0437C48.2841 15.113 47.7994 15.0447 47.3947 14.8389C46.9976 14.6321 46.6789 14.3073 46.4387 13.8644C46.2061 13.4205 46.0514 12.8858 45.9746 12.2603L46.0747 12.2247C45.9961 11.5839 46.0087 11.0248 46.1127 10.5474C46.2234 10.0614 46.4392 9.67479 46.7602 9.38758C47.0888 9.09942 47.5354 8.92069 48.0999 8.85137C48.6339 8.7858 49.1219 8.84979 49.5639 9.04333C50.0049 9.22925 50.3722 9.54037 50.6658 9.9767C50.9585 10.4054 51.1452 10.9478 51.2257 11.6039C51.3063 12.26 51.2569 12.8352 51.0775 13.3296C50.8972 13.8164 50.6161 14.2072 50.2341 14.5019C49.8521 14.7966 49.3903 14.9772 48.8486 15.0437ZM48.2128 14.1228C48.5561 14.0806 48.84 13.9645 49.0645 13.7743C49.2965 13.5832 49.4582 13.3232 49.5495 12.9945C49.6475 12.6573 49.6684 12.2597 49.6122 11.802C49.556 11.3443 49.44 10.9674 49.2643 10.6715C49.0953 10.367 48.8788 10.1497 48.615 10.0194C48.3503 9.88156 48.0425 9.83417 47.6915 9.87726C47.3559 9.91847 47.0724 10.0385 46.8413 10.2372C46.6168 10.4274 46.4556 10.6911 46.3576 11.0284C46.2587 11.358 46.2374 11.7517 46.2936 12.2095C46.3498 12.6672 46.4662 13.0479 46.6429 13.3514C46.8186 13.6474 47.0422 13.86 47.3136 13.9893C47.585 14.1186 47.8848 14.1631 48.2128 14.1228ZM45.2285 15.3604L44.3109 7.88783L43.4985 7.98759L43.4057 7.23232L45.7173 6.9485L46.2119 10.9766L46.1219 12.2306L46.4375 13.76L46.6131 15.1904L45.2285 15.3604Z" fill="white"/>
<path d="M59.6659 5.89728C59.5646 5.07218 59.0354 4.36177 58.2738 4.02848L52.2203 1.37922C51.8338 1.21007 51.4089 1.14795 50.9902 1.19937L50.9498 1.20433L51.4834 5.55078L52.8176 16.4169L53.3513 20.7633L53.3917 20.7584C53.8105 20.707 54.2077 20.5439 54.5418 20.2863L59.7746 16.2512C60.4329 15.7436 60.7745 14.9263 60.6732 14.1012L59.6659 5.89728Z" fill="black"/>
</svg>
  );
}
